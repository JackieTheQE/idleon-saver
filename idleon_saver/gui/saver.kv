#:kivy 2.0.0

<BackgroundColor@Widget>:
    background_color: 1, 1, 1, 1
    canvas.before:
        Color:
            rgba: root.background_color
        Rectangle:
            size: self.size
            pos: self.pos

<Info@Label+BackgroundColor>:
    background_color: 1, 0, 0, 1
    size: self.texture_size
    size_hint_y: None
    padding: [10, 10]
    text_size: root.width, None
    font_size: 18

<Button>:
    size: 100, 30
    size_hint: None, None
    font_size: 20

<ErrorDialog>:
    orientation: 'vertical'
    padding: [10]

    Info:
        halign: "justify"
        text: "Oops! I couldn't find the right file. Check the path and try again.\nIf you keep getting this error, please report it on GitHub with your log file attached."

    BoxLayout:
        size_hint_y: None

        Button:
            text: "Open Log Folder"
            on_release: root.open_logs()
        
        Label:
            
        Button:
            text: "Open GitHub"
            on_release: root.open_github()
        
        Label:
        
        Button:
            text: "Done"
            on_release: root.done()

<PathScreen>:
    back: back
    next: next
    error: error
    path_input: path_input

    BoxLayout:
        orientation: 'vertical'
        padding: [10]

        Label:
            size_hint_y: None
            height: 100

        Info:
            id: caption
            text: root.caption

        BoxLayout:
            size_hint_y: None
            height: 30

            TextInput:
                id: path_input
                size_hint_y: None
                font_size: 16
                height: 30
                multiline: False
                on_text: root.on_path_text(args[1])
                text: root.default_path

            Button:
                text: 'Browse'
                on_release: root.show_filebrowser()
        
        Info:
            id: error

        Label:

        BoxLayout:
            size_hint_y: None

            Button:
                id: back
                text: 'Back'
                on_release: 
                    root.manager.transition.direction = 'right'
                    root.manager.current = root.manager.previous()
            
            Label:

            Button:
                id: next
                text: 'Next'
                on_release: 
                    root.try_action(root.path_input.text)

<FileChooserDialog>:
    orientation: "vertical"
    padding: [10]

    FileChooserListView:
        id: filechooser
        filters: root.filters
        on_submit: root.done(filechooser.path, filechooser.selection)

    BoxLayout:
        size_hint_y: None
        height: 30

        Button:
            text: "Cancel"
            on_release: root.cancel()

        Label:

        Button:
            text: "Done"
            on_release: root.done(filechooser.path, filechooser.selection)

<StartScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [10]

        Label:
            size_hint_y: None
            height: 100

        Info:
            text: "Welcome to Idleon Saver!"

        Label:

        BoxLayout:
            size_hint_y: None

            Button:
                id: back
                text: 'Exit'
                on_release: 
                    app.stop()
            
            Label:

            Button:
                id: next
                text: 'Next'
                on_release: 
                    root.manager.transition.direction = 'left'
                    root.manager.current = root.manager.next()

<EndScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [10]

        Label:
            size_hint_y: None
            height: 100

        Info:
            text: "Thanks for using Idleon Saver!"

        Label:

        BoxLayout:
            size_hint_y: None

            Button:
                id: back
                text: 'Back'
                on_release: 
                    root.manager.transition.direction = 'right'
                    root.manager.current = root.manager.previous()
            
            Label:

            Button:
                id: next
                text: 'Finish'
                on_release: 
                    app.stop()
